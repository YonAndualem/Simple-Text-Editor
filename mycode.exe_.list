EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
mycode.exe_ -- emu8086 assembler version: 4.08  
 
[ 5/27/2025  --  9:16:07 AM ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       ;===============================
[   2]        :                                       ; Command-Line Text Editor - Patched
[   3]        :                                       ; Includes:
[   4]        :                                       ; - Cursor bounds check
[   5]        :                                       ; - File save size fix
[   6]        :                                       ; - Matrix overflow protection
[   7]        :                                       ; - Better backspace handling
[   8]        :                                       ; - Visual cursor settings
[   9]        :                                       ; - Character-by-character file display
[  10]        :                                       ; - Optional: line counter
[  11]        :                                       ;===============================
[  12]        :                                       
[  13]        :                                       .MODEL SMALL
[  14]        :                                       .STACK 100H
[  15]        :                                       .DATA
[  16]    0100: 00 00 00 00 00 00 00 00 00 00 00 00   matrix      db 2000 dup(?)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00             
[  17]    08D0: 00 00 00 00 00 00 00 00 00 00 00 00   matrix_2    db 22 dup(?)
                00 00 00 00 00 00 00 00 00 00       
[  18]    08E6: 02                                    row         db 2
[  19]    08E7: 00                                    column      db 0
[  20]    08E8: 02                                    curr_line   db 2
[  21]    08E9: 00                                    curr_char   db 0
[  22]    08EA: 20 20 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D   deco1       db '  =================================================$'
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 24                         
[  23]    091E: 7C 7C 20 20 20 20 20 20 20 20 20 20   deco2       db '||            Command Line Text Editor             ||$'
                20 20 43 6F 6D 6D 61 6E 64 20 4C 69 
                6E 65 20 54 65 78 74 20 45 64 69 74 
                6F 72 20 20 20 20 20 20 20 20 20 20 
                20 20 20 7C 7C 24                   
[  24]    0954: 7C 7C 20 20 20 20 20 20 20 20 20 20   deco3       db '||                                                 ||$'
                20 20 20 20 20 20 20 20 20 20 20 20 
                20 20 20 20 20 20 20 20 20 20 20 20 
                20 20 20 20 20 20 20 20 20 20 20 20 
                20 20 20 7C 7C 24                   
[  25]    098A: 7C 7C 20 20 20 20 20 20 20 20 20 45   deco4       db '||         ESC = Exit || CTRL+S = Save File        ||$'
                53 43 20 3D 20 45 78 69 74 20 7C 7C 
                20 43 54 52 4C 2B 53 20 3D 20 53 61 
                76 65 20 46 69 6C 65 20 20 20 20 20 
                20 20 20 7C 7C 24                   
[  26]    09C0: 7C 7C 20 20 20 20 20 20 20 20 20 20   deco5       db '||              ARROW KEYS = Navigate              ||$'
                20 20 20 20 41 52 52 4F 57 20 4B 45 
                59 53 20 3D 20 4E 61 76 69 67 61 74 
                65 20 20 20 20 20 20 20 20 20 20 20 
                20 20 20 7C 7C 24                   
[  27]    09F6: 20 20 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D   deco6       db '  =================================================$'
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 24                         
[  28]    0A2A: 45 6E 74 65 72 20 44 6F 63 75 6D 65   docPrompt   db 'Enter Document Name (.txt): $'
                6E 74 20 4E 61 6D 65 20 28 2E 74 78 
                74 29 3A 20 24                      
[  29]    0A47: 00 00 00 00 00 00 00 00 00 00 00 00   docName     db 50 dup(?)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00                               
[  30]    0A79: 45 6E 74 65 72 20 44 6F 63 75 6D 65   openPrompt  db 'Enter Document Name to Open: $'
                6E 74 20 4E 61 6D 65 20 74 6F 20 4F 
                70 65 6E 3A 20 24                   
[  31]    0A97: 00 00                                 HANDLE      dw ?
[  32]    0A99: 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D   header      db '================================================================================','$'
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 3D 
                3D 3D 3D 3D 3D 3D 3D 3D 24          
[  33]    0AEA: 4C 69 6E 65 3A 20 24                  lineLabel   db 'Line: $'
[  34]    0AF1: 00 00                                 charCount   dw 0
[  35]        :                                       .CODE
[  36]        :                                       
[  37]        :                                       ;====== MACROS ======
[  38]        :                                       newline macro
[  39]        :                                       mov dl, 10
[  40]        :                                       mov ah, 2
[  41]        :                                       int 21h
[  42]        :                                       mov dl, 13
[  43]        :                                       mov ah, 2
[  44]        :                                       int 21h
[  45]        :                                       endm
[  46]        :                                       remove macro
[  47]        :                                       mov dl, 8
[  48]        :                                       mov ah, 2
[  49]        :                                       int 21h
[  50]        :                                       mov dl, 32
[  51]        :                                       int 21h
[  52]        :                                       mov dl, 8
[  53]        :                                       int 21h
[  54]        :                                       endm
[  55]        :                                       goto_pos macro r, c
[  56]        :                                       mov ah, 02h
[  57]        :                                       mov dh, r
[  58]        :                                       mov dl, c
[  59]        :                                       int 10h
[  60]        :                                       endm
[  61]        :                                       clrScrn macro
[  62]        :                                       mov ah, 0
[  63]        :                                       mov al, 03h
[  64]        :                                       int 10h
[  65]        :                                       endm
[  66]        :                                       
[  67]    0B00:                                       start_menu proc
[  68]    0B00: B4 02 B6 05 B2 0C CD 10               goto_pos 5, 12
[  69]    0B08: BA EA 07                              mov dx, offset deco1
[  70]    0B0B: B4 09                                 mov ah, 9
[  71]    0B0D: CD 21                                 int 21h
[  72]    0B0F: B4 02 B6 06 B2 0C CD 10               goto_pos 6, 12
[  73]    0B17: BA 1E 08                              mov dx, offset deco2
[  74]    0B1A: B4 09                                 mov ah, 9
[  75]    0B1C: CD 21                                 int 21h
[  76]    0B1E: B4 02 B6 07 B2 0C CD 10               goto_pos 7, 12
[  77]    0B26: BA 54 08                              mov dx, offset deco3
[  78]    0B29: B4 09                                 mov ah, 9
[  79]    0B2B: CD 21                                 int 21h
[  80]    0B2D: B4 02 B6 08 B2 0C CD 10               goto_pos 8, 12
[  81]    0B35: BA 8A 08                              mov dx, offset deco4
[  82]    0B38: B4 09                                 mov ah, 9
[  83]    0B3A: CD 21                                 int 21h
[  84]    0B3C: B4 02 B6 09 B2 0C CD 10               goto_pos 9, 12
[  85]    0B44: BA C0 08                              mov dx, offset deco5
[  86]    0B47: B4 09                                 mov ah, 9
[  87]    0B49: CD 21                                 int 21h
[  88]    0B4B: B4 02 B6 0A B2 0C CD 10               goto_pos 10, 12
[  89]    0B53: BA F6 08                              mov dx, offset deco6
[  90]    0B56: B4 09                                 mov ah, 9
[  91]    0B58: CD 21                                 int 21h
[  92]    0B5A: B4 02 B6 0D B2 0C CD 10               goto_pos 13, 12
[  93]    0B62: BA 2A 09                              mov dx, offset docPrompt
[  94]    0B65: B4 09                                 mov ah, 9
[  95]    0B67: CD 21                                 int 21h
[  96]        :                                       
[  97]    0B69: B9 00 00                              mov cx, 0
[  98]    0B6C: BE 47 09                              mov si, offset docName
[  99]    0B6F:                                       get_input:
[ 100]    0B6F: B4 01                                 mov ah, 1
[ 101]    0B71: CD 21                                 int 21h
[ 102]    0B73: 3C 0D                                 cmp al, 13
[ 103]    0B75: 74 21                                 je done_input
[ 104]    0B77: 3C 08                                 cmp al, 8
[ 105]    0B79: 74 06                                 je handle_back
[ 106]    0B7B: 88 04                                 mov [si], al
[ 107]    0B7D: 46                                    inc si
[ 108]    0B7E: 41                                    inc cx
[ 109]    0B7F: EB EE                                 jmp get_input
[ 110]    0B81:                                       handle_back:
[ 111]    0B81: 83 F9 00                              cmp cx, 0
[ 112]    0B84: 74 E9                                 je get_input
[ 113]    0B86: 4E                                    dec si
[ 114]    0B87: 49                                    dec cx
[ 115]    0B88: B2 08 B4 02 CD 21 B2 20 CD 21 B2 08   remove
                CD 21                               
[ 116]    0B96: EB D7                                 jmp get_input
[ 117]    0B98:                                       done_input:
[ 118]    0B98: C3                                    ret
[ 119]        :                                       start_menu endp
[ 120]        :                                       
[ 121]    0B99:                                       upper_bar proc
[ 122]    0B99: B4 02 B6 00 B2 00 CD 10               goto_pos 0, 0
[ 123]    0BA1: BA 47 09                              mov dx, offset docName
[ 124]    0BA4: B4 09                                 mov ah, 9
[ 125]    0BA6: CD 21                                 int 21h
[ 126]    0BA8: B4 02 B6 01 B2 00 CD 10               goto_pos 1, 0
[ 127]    0BB0: BA 99 09                              mov dx, offset header
[ 128]    0BB3: B4 09                                 mov ah, 9
[ 129]    0BB5: CD 21                                 int 21h
[ 130]    0BB7: C3                                    ret
[ 131]        :                                       upper_bar endp
[ 132]        :                                       
[ 133]    0BB8:                                       print_matrix proc
[ 134]    0BB8: 56                                    push si
[ 135]    0BB9: 51                                    push cx
[ 136]    0BBA: BE 00 00                              mov si, offset matrix
[ 137]    0BBD: 8B 0E F1 09                           mov cx, charCount
[ 138]    0BC1:                                       .loop:
[ 139]    0BC1: AC                                    lodsb
[ 140]    0BC2: 8A D0                                 mov dl, al
[ 141]    0BC4: B4 02                                 mov ah, 2
[ 142]    0BC6: CD 21                                 int 21h
[ 143]    0BC8: E2 F7                                 loop .loop
[ 144]    0BCA: 59                                    pop cx
[ 145]    0BCB: 5E                                    pop si
[ 146]    0BCC: C3                                    ret
[ 147]        :                                       print_matrix endp
[ 148]        :                                       
[ 149]    0BCD:                                       MAIN PROC
[ 150]    0BCD: B8 10 00                              mov ax, @data
[ 151]    0BD0: 8E D8                                 mov ds, ax
[ 152]    0BD2: B4 00 B0 03 CD 10                     clrScrn
[ 153]    0BD8: E8 25 FF                              call start_menu
[ 154]    0BDB: B4 00 B0 03 CD 10                     clrScrn
[ 155]    0BE1: E8 B5 FF                              call upper_bar
[ 156]        :                                       
[ 157]    0BE4: C6 06 E6 07 02                        mov row, 2
[ 158]    0BE9: C6 06 E7 07 00                        mov column, 0
[ 159]    0BEE: BE 00 00                              mov si, offset matrix
[ 160]    0BF1: C6 06 E8 07 02                        mov curr_line, 2
[ 161]    0BF6: C6 06 E9 07 00                        mov curr_char, 0
[ 162]    0BFB: C7 06 F1 09 00 00                     mov charCount, 0
[ 163]        :                                       
[ 164]    0C01:                                       main_loop:
[ 165]    0C01: B4 02 8A 36 E6 07 8A 16 E7 07 CD 10   goto_pos row, column
                                                    
[ 166]    0C0D: B4 00                                 mov ah, 0
[ 167]    0C0F: CD 16                                 int 16h
[ 168]    0C11: 3C 13                                 cmp al, 19
[ 169]    0C13: 75 03 E9 02 01                        je save_file
[ 170]    0C18: 3C 1B                                 cmp al, 27
[ 171]    0C1A: 75 03 E9 8C 01                        je exit_editor
[ 172]    0C1F: 3C 0F                                 cmp al, 15
[ 173]    0C21: 75 03 E9 1B 01                        je open_file
[ 174]    0C26: 80 FC 48                              cmp ah, 48h
[ 175]    0C29: 75 03 E9 A8 00                        je move_up
[ 176]    0C2E: 80 FC 50                              cmp ah, 50h
[ 177]    0C31: 75 03 E9 B1 00                        je move_down
[ 178]    0C36: 80 FC 4B                              cmp ah, 4Bh
[ 179]    0C39: 75 03 E9 BA 00                        je move_left
[ 180]    0C3E: 80 FC 4D                              cmp ah, 4Dh
[ 181]    0C41: 75 03 E9 C3 00                        je move_right
[ 182]    0C46: 80 FC 0E                              cmp ah, 0Eh
[ 183]    0C49: 74 4C                                 je backspace
[ 184]    0C4B: 80 FC 1C                              cmp ah, 1Ch
[ 185]    0C4E: 74 1D                                 je newline_press
[ 186]        :                                       
[ 187]        :                                       ; character input
[ 188]    0C50: 81 FE D0 07                           cmp si, offset matrix + 2000
[ 189]    0C54: 73 AB                                 jae main_loop
[ 190]    0C56: 8A D0                                 mov dl, al
[ 191]    0C58: B4 02                                 mov ah, 2
[ 192]    0C5A: CD 21                                 int 21h
[ 193]    0C5C: 88 04                                 mov [si], al
[ 194]    0C5E: 46                                    inc si
[ 195]    0C5F: FE 06 E7 07                           inc column
[ 196]    0C63: FE 06 E9 07                           inc curr_char
[ 197]    0C67: FF 06 F1 09                           inc charCount
[ 198]    0C6B: EB 94                                 jmp main_loop
[ 199]        :                                       
[ 200]    0C6D:                                       newline_press:
[ 201]    0C6D: B0 0A                                 mov al, 10
[ 202]    0C6F: 88 04                                 mov [si], al
[ 203]    0C71: 46                                    inc si
[ 204]    0C72: B2 0A B4 02 CD 21 B2 0D B4 02 CD 21   newline
                                                    
[ 205]    0C7E: FE 06 E6 07                           inc row
[ 206]    0C82: C6 06 E7 07 00                        mov column, 0
[ 207]    0C87: FE 06 E8 07                           inc curr_line
[ 208]    0C8B: C6 06 E9 07 00                        mov curr_char, 0
[ 209]    0C90: FF 06 F1 09                           inc charCount
[ 210]    0C94: E9 6A FF                              jmp main_loop
[ 211]        :                                       
[ 212]    0C97:                                       backspace:
[ 213]    0C97: 83 FE 00                              cmp si, offset matrix
[ 214]    0C9A: 77 03 E9 62 FF                        jbe main_loop
[ 215]    0C9F: 4E                                    dec si
[ 216]    0CA0: FF 0E F1 09                           dec charCount
[ 217]    0CA4: B2 08 B4 02 CD 21 B2 20 CD 21 B2 08   remove
                CD 21                               
[ 218]    0CB2: 80 3E E7 07 00                        cmp column, 0
[ 219]    0CB7: 75 16                                 jne .cont
[ 220]    0CB9: 80 3E E6 07 02                        cmp row, 2
[ 221]    0CBE: 77 03 E9 3E FF                        jbe main_loop
[ 222]    0CC3: FE 0E E6 07                           dec row
[ 223]    0CC7: C6 06 E7 07 4F                        mov column, 79
[ 224]    0CCC: E9 32 FF                              jmp main_loop
[ 225]    0CCF:                                       .cont:
[ 226]    0CCF: FE 0E E7 07                           dec column
[ 227]    0CD3: E9 2B FF                              jmp main_loop
[ 228]        :                                       
[ 229]    0CD6:                                       move_up:
[ 230]    0CD6: 80 3E E6 07 02                        cmp row, 2
[ 231]    0CDB: 77 03 E9 21 FF                        jbe main_loop
[ 232]    0CE0: FE 0E E6 07                           dec row
[ 233]    0CE4: E9 1A FF                              jmp main_loop
[ 234]    0CE7:                                       move_down:
[ 235]    0CE7: 80 3E E6 07 18                        cmp row, 24
[ 236]    0CEC: 72 03 E9 10 FF                        jae main_loop
[ 237]    0CF1: FE 06 E6 07                           inc row
[ 238]    0CF5: E9 09 FF                              jmp main_loop
[ 239]    0CF8:                                       move_left:
[ 240]    0CF8: 80 3E E7 07 00                        cmp column, 0
[ 241]    0CFD: 77 03 E9 FF FE                        jbe main_loop
[ 242]    0D02: FE 0E E7 07                           dec column
[ 243]    0D06: E9 F8 FE                              jmp main_loop
[ 244]    0D09:                                       move_right:
[ 245]    0D09: 80 3E E7 07 4F                        cmp column, 79
[ 246]    0D0E: 72 03 E9 EE FE                        jae main_loop
[ 247]    0D13: FE 06 E7 07                           inc column
[ 248]    0D17: E9 E7 FE                              jmp main_loop
[ 249]        :                                       
[ 250]    0D1A:                                       save_file:
[ 251]    0D1A: B4 3C                                 mov ah, 3Ch
[ 252]    0D1C: 33 C9                                 xor cx, cx
[ 253]    0D1E: BA 47 09                              mov dx, offset docName
[ 254]    0D21: CD 21                                 int 21h
[ 255]    0D23: B4 3D                                 mov ah, 3Dh
[ 256]    0D25: B0 01                                 mov al, 1
[ 257]    0D27: BA 47 09                              mov dx, offset docName
[ 258]    0D2A: CD 21                                 int 21h
[ 259]    0D2C: A3 97 09                              mov HANDLE, ax
[ 260]    0D2F: B4 40                                 mov ah, 40h
[ 261]    0D31: 8B 1E 97 09                           mov bx, HANDLE
[ 262]    0D35: 8B 0E F1 09                           mov cx, charCount
[ 263]    0D39: BA 00 00                              mov dx, offset matrix
[ 264]    0D3C: CD 21                                 int 21h
[ 265]    0D3E: E9 C0 FE                              jmp main_loop
[ 266]        :                                       
[ 267]    0D41:                                       open_file:
[ 268]    0D41: B4 02 B6 16 B2 00 CD 10               goto_pos 22, 0
[ 269]    0D49: BA 79 09                              mov dx, offset openPrompt
[ 270]    0D4C: B4 09                                 mov ah, 9
[ 271]    0D4E: CD 21                                 int 21h
[ 272]    0D50: BF 47 09                              mov di, offset docName
[ 273]    0D53: B9 00 00                              mov cx, 0
[ 274]    0D56:                                       get_open:
[ 275]    0D56: B4 01                                 mov ah, 1
[ 276]    0D58: CD 21                                 int 21h
[ 277]    0D5A: 3C 0D                                 cmp al, 13
[ 278]    0D5C: 74 21                                 je do_open
[ 279]    0D5E: 3C 08                                 cmp al, 8
[ 280]    0D60: 74 06                                 je rm_open
[ 281]    0D62: 88 05                                 mov [di], al
[ 282]    0D64: 47                                    inc di
[ 283]    0D65: 41                                    inc cx
[ 284]    0D66: EB EE                                 jmp get_open
[ 285]    0D68:                                       rm_open:
[ 286]    0D68: 83 F9 00                              cmp cx, 0
[ 287]    0D6B: 74 E9                                 je get_open
[ 288]    0D6D: 4F                                    dec di
[ 289]    0D6E: 49                                    dec cx
[ 290]    0D6F: B2 08 B4 02 CD 21 B2 20 CD 21 B2 08   remove
                CD 21                               
[ 291]    0D7D: EB D7                                 jmp get_open
[ 292]    0D7F:                                       do_open:
[ 293]    0D7F: B4 00 B0 03 CD 10                     clrScrn
[ 294]    0D85: E8 11 FE                              call upper_bar
[ 295]    0D88: B4 3D                                 mov ah, 3Dh
[ 296]    0D8A: 32 C0                                 xor al, al
[ 297]    0D8C: BA 47 09                              mov dx, offset docName
[ 298]    0D8F: CD 21                                 int 21h
[ 299]    0D91: A3 97 09                              mov HANDLE, ax
[ 300]    0D94: B4 3F                                 mov ah, 3Fh
[ 301]    0D96: 8B 1E 97 09                           mov bx, HANDLE
[ 302]    0D9A: B9 D0 07                              mov cx, 2000
[ 303]    0D9D: BA 00 00                              mov dx, offset matrix
[ 304]    0DA0: CD 21                                 int 21h
[ 305]    0DA2: A3 F1 09                              mov charCount, ax
[ 306]    0DA5: E8 10 FE                              call print_matrix
[ 307]    0DA8: E9 56 FE                              jmp main_loop
[ 308]        :                                       
[ 309]    0DAB:                                       exit_editor:
[ 310]    0DAB: B4 4C                                 mov ah, 4Ch
[ 311]    0DAD: CD 21                                 int 21h
[ 312]        :                                       MAIN ENDP
[ 313]        :                                       END MAIN
[ 314]        :                                       
[ 315]        :                                       
 
===================================================================================================
 
EXE HEADER - bytes from 0000 to 01FF inclusive.

0000: 4D      -   exe signature (M)
0001: 5A      -   exe signature (Z)
0002: AF      -   bytes on last page (l.byte)
0003: 01      -   bytes on last page (h.byte)
0004: 08      -   512 byte pages in file (l.byte)
0005: 00      -   512 byte pages in file (h.byte)
0006: 01      -   relocations (l.byte)
0007: 00      -   relocations (h.byte)
0008: 20      -   paragraphs in header (l.byte)
0009: 00      -   paragraphs in header (h.byte)
000A: 00      -   minimum memory (l.byte)
000B: 00      -   minimum memory (h.byte)
000C: FF      -   maximum memory (l.byte)
000D: FF      -   maximum memory (h.byte)
000E: 00      -   SS - stack segment (l.byte)
000F: 00      -   SS - stack segment (h.byte)
0010: 00      -   SP - stack pointer (l.byte)
0011: 01      -   SP - stack pointer (h.byte)
0012: DD      -   check sum (l.byte)
0013: 38      -   check sum (h.byte)
0014: CD      -   IP - instruction pointer (l.byte)
0015: 00      -   IP - instruction pointer (h.byte)
0016: B0      -   CS - code segment (l.byte)
0017: 00      -   CS - code segment (h.byte)
0018: 1E      -   relocation table adress (l.byte)
0019: 00      -   relocation table adress (h.byte)
001A: 00      -   overlay number (l.byte)
001B: 00      -   overlay number (h.byte)
001C: 01      -   signature (l.byte)
001D: 00      -   signature (h.byte)
001E: CE      -   relocation table - offset inside segment (l.byte)
001F: 00      -   relocation table - offset inside segment (h.byte)
0020: B0      -   relocation table - segment anchor (l.byte)
0021: 00      -   relocation table - segment anchor (h.byte)
0022 to 01FF  -   reserved relocation area  (00) 




===================================================================================================
